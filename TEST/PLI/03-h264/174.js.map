{"version":3,"sources":["webpack://phenix/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://phenix/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://phenix/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://phenix/./node_modules/@babel/runtime/helpers/createClass.js","webpack://phenix/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://phenix/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://phenix/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://phenix/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://phenix/./node_modules/@babel/runtime/helpers/toPrimitive.js","webpack://phenix/./node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack://phenix/./node_modules/@babel/runtime/helpers/typeof.js","webpack://phenix/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://phenix/./src/sdk/transformation/SurrogateFrameDataPerCodec.ts","webpack://phenix/./src/sdk/transformation/WorkerTransformStream.ts"],"names":["module","exports","arr","len","length","i","arr2","Array","__esModule","arrayLikeToArray","isArray","instance","Constructor","TypeError","toPropertyKey","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","obj","value","iter","Symbol","iterator","from","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_typeof","t","r","e","toPrimitive","call","String","Number","o","constructor","minLen","n","toString","slice","name","test","_DUMMY_H264_IDR_FRAME_SLICE_HDR0","Uint8Array","_DUMMY_H264_IDR_FRAME_SLICE_HDR1","_h264IdrPicIdToggle","_NIKNIKprint","_dummyH264Frame","concat","_toConsumableArray","invalidFrame","self","onmessage","event","WorkerTransformStream","forceInvalidFrame","data","RTCTransformEvent","onrtctransform","transformer","codec","options","transformFunction","kind","videoTransformFunction","audioTransformFunction","transformStream","TransformStream","transform","source","readable","sink","pipeThrough","pipeTo","_classCallCheck","Error","_createClass","chunk","controller","postMessage","type","timestamp","console","log","surrogateVideoIFramePerCodec","surrogateVideoPFramePerCodec","enqueue","surrogateAudioSilentPerCodec","_defineProperty"],"mappings":"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","file":"174.js","sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nmodule.exports = toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}\nmodule.exports = toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/**\n * Copyright 2023 Phenix Real Time Solutions, Inc. Confidential and Proprietary. All Rights Reserved.\n */\n\nconst _DUMMY_H264_IDR_FRAME_SLICE_HDR0 = new Uint8Array([0x20, 0x00, 0xcb]);\nconst _DUMMY_H264_IDR_FRAME_SLICE_HDR1 = new Uint8Array([0x10, 0x00, 0x32]);\nlet _h264IdrPicIdToggle = false;\nlet _NIKNIKprint = -1;\n\nfunction _dummyH264Frame() {\n  _h264IdrPicIdToggle = !_h264IdrPicIdToggle;\n\n  /* Breakdown of H264 Dummy Frames\n   *\n   * return new Uint8Array([\n   *   0x0, 0x0, 0x0, 0x1,   // start code prefix\n   *   0x27,                 // NAL unit type: 7: sequence parameter\n   *     0x64 profile_idc,\n   *     0x0 constraint_set_flags,\n   *     0xd level_idc,\n   *     SPS: [0xac, 0x57] seq_parameter_set_id,\n   *     0x5 log2_max_frame_num_minus4,\n   *     0x6 pic_order_cnt_type,\n   *     0x64 log2_max_pic_order_cnt_lasb_minus4,\n   *\n   *  0x0, 0x0, 0x0, 0x1,    // start code prefix\n   *  0x28,                  // NAL unit type: 8: picture parameter\n   *    0xee, 0x3c, 0xb0,    // NAL unit payload\n   *\n   *  0x0, 0x0, 0x0, 0x1,    // start code prefix\n   *  0x25,                  // NAL unit type: 5: IDR picture\n   *    0xb8, ..._h264IdrPicIdToggle ? _DUMMY_H264_IDR_FRAME_SLICE_HDR0 : _DUMMY_H264_IDR_FRAME_SLICE_HDR1,\n   *    0xff, 0x26, 0x1d, 0xd9, 0x18, 0xc0, 0xa1, 0x60, 0x0, 0x0, 0xc, 0xe5, 0xae, 0xa6, 0x6, 0x7, 0x14, 0x3, 0x54, 0x0, 0xf7, 0x60, 0xc1, 0xb5, 0xe5, 0x80, 0x0, 0x20, 0x20\n   *\n   * ])['buffer'];\n   */\n\n  return new Uint8Array([0x00, 0x00, 0x00, 0x01, 0x27, 0x64, 0x00, 0xd, 0xac, 0x57, 0x05, 0x06, 0x64, 0x00, 0x00, 0x00, 0x01, 0x28, 0xee, 0x3c, 0xb0, 0x00, 0x00, 0x00, 0x01, 0x25, 0xb8, ..._h264IdrPicIdToggle ? _DUMMY_H264_IDR_FRAME_SLICE_HDR0 : _DUMMY_H264_IDR_FRAME_SLICE_HDR1, 0xff, 0x26, 0x1d, 0xd9, 0x18, 0xc0, 0xa1, 0x60, 0x0, 0x0, 0xc, 0xe5, 0xae, 0xa6, 0x06, 0x07, 0x14, 0x03, 0x54, 0x00, 0xf7, 0x60, 0xc1, 0xb5, 0xe5, 0x80, 0x00, 0x20, 0x20])['buffer'];\n}\n\nfunction surrogateVideoIFramePerCodec(codec: string) : ArrayBuffer | undefined {\n  if (_NIKNIKprint !== 1) {\n    _NIKNIKprint = 1;\n    console.log('NIKNIK: I frame: ', codec);\n  }\n\n  switch (codec) {\n    case 'H264': {\n      return _dummyH264Frame();\n    }\n\n    case 'VP8': {\n      return new Uint8Array([0xb0, 0x02, 0x00, 0x9d, 0x01, 0x2a, 0x01, 0x00, 0x01, 0x00, 0x39, 0x6b, 0x00, 0x27, 0x1c, 0x24, 0x0c, 0x2c, 0x2c, 0x44, 0xcc, 0x24, 0x41, 0xa8, 0x00, 0x13, 0xa7, 0xa3, 0x7a, 0x50, 0x00, 0xfe, 0xeb, 0xde, 0x2f, 0x8a, 0x1e, 0x6b, 0x7b, 0x07, 0x72, 0x63, 0x09, 0xa4, 0x8e, 0xc0])['buffer'];\n    }\n\n    case 'VP9': {\n      return new Uint8Array([0x82, 0x49, 0x83, 0x42, 0x00, 0x00, 0x00, 0x00, 0x06, 0x76, 0x38, 0x24, 0x1c, 0x19, 0xa0, 0x00, 0x00, 0x20, 0x40, 0x00, 0x11, 0xbf, 0xdd, 0x77, 0xff, 0x40, 0x7f, 0xb1, 0x00])['buffer'];\n    }\n\n    default: {\n      return undefined;\n    }\n  }\n}\n\nfunction surrogateVideoPFramePerCodec(codec: string) : ArrayBuffer | undefined {\n  if (_NIKNIKprint !== 2) {\n    _NIKNIKprint = 2;\n    console.log('NIKNIK: P frame: ', codec);\n  }\n\n  switch (codec) {\n    case 'H264': {\n      return _dummyH264Frame();\n    }\n\n    case 'VP8': {\n      return new Uint8Array([0x31, 0x03, 0x00, 0xe4, 0xe0, 0xa8, 0x9b, 0x37, 0xaf, 0x10, 0x4f, 0x4f, 0xb1, 0x0a, 0x2f, 0xe4, 0x92, 0xc0, 0x1f, 0xe7, 0x4f, 0x46, 0xff, 0xee, 0x51, 0xc1, 0x5d, 0x00, 0xfe, 0xeb, 0xde, 0x2f, 0x8a, 0x1e, 0x6b, 0x7b, 0x07, 0x72, 0x63, 0x09, 0xa4, 0x8e, 0xc0])['buffer'];\n    }\n\n    case 'VP9': {\n      return new Uint8Array([0x86, 0x00, 0x40, 0x92, 0x9c, 0x24, 0x48, 0x00, 0x00, 0x03, 0x70, 0x00, 0x00, 0x4b, 0x40])['buffer'];\n    }\n\n    default: {\n      return undefined;\n    }\n  }\n}\n\nfunction surrogateAudioSilentPerCodec(codec: string) : ArrayBuffer | undefined {\n  switch (codec) {\n    case 'opus': {\n      return new Uint8Array([0x68, 0x07, 0xd9, 0xab, 0xbc, 0x79, 0x87, 0xab, 0x8e, 0x4a, 0x14, 0xf3, 0xa7, 0x1c, 0xf2, 0x9a, 0x7a, 0x45, 0xa7, 0x2d, 0x44, 0x25, 0x74, 0x4c, 0xad, 0x16, 0xb3, 0x0e, 0x51, 0x57, 0xea, 0xe7, 0xad, 0x2a, 0x38, 0xce, 0x33])['buffer'];\n    }\n\n    default: {\n      return undefined;\n    }\n  }\n}\n\nfunction invalidFrame() {\n  return new Uint8Array([0x00])['buffer'];\n}\n\nexport {\n  surrogateVideoIFramePerCodec,\n  surrogateVideoPFramePerCodec,\n  surrogateAudioSilentPerCodec,\n  invalidFrame\n};","/**\n * Copyright 2023 Phenix Real Time Solutions, Inc. Confidential and Proprietary. All Rights Reserved.\n */\nimport {surrogateVideoIFramePerCodec, surrogateVideoPFramePerCodec, surrogateAudioSilentPerCodec, invalidFrame} from './SurrogateFrameDataPerCodec';\n\ntype TransformStreamPostMessage = {\n  options: {\n    kind: string;\n    codec: string;\n  };\n  readable: ReadableStream;\n  writable: WritableStream;\n};\n\ntype ForceInvalidFramePostMessage = {\n  forceInvalidFrame: boolean;\n};\n\ninterface IResponseWorker {\n  onmessage: (message: MessageEvent<ForceInvalidFramePostMessage>) => void;\n}\n\nconst worker: IResponseWorker = self as IResponseWorker;\n\nworker.onmessage = event => {\n  WorkerTransformStream.forceInvalidFrame = event.data.forceInvalidFrame;\n};\n\nif (self.RTCTransformEvent) {\n  self.onrtctransform = event => {\n    const transformer = event.transformer as TransformStreamPostMessage;\n\n    WorkerTransformStream.codec = transformer.options.codec;\n    WorkerTransformStream.transformFunction = transformer.options.kind === 'video' ? WorkerTransformStream.videoTransformFunction : WorkerTransformStream.audioTransformFunction;\n    WorkerTransformStream.forceInvalidFrame = false;\n\n    const transformStream = new TransformStream({transform: WorkerTransformStream.transformFunction});\n    const source = transformer.readable;\n    const sink = transformer.writable;\n\n    source\n      .pipeThrough(transformStream)\n      .pipeTo(sink);\n  };\n}\n\nclass WorkerTransformStream {\n  static codec: string;\n  static transformFunction: TransformerTransformCallback<AudioData | VideoFrame, TransformStreamDefaultController> | undefined;\n  static forceInvalidFrame: boolean;\n\n  static videoTransformFunction(chunk, controller): void {\n    postMessage({\n      chunk: {\n        type: chunk.type,\n        timestamp: chunk.timestamp,\n        data: chunk.data\n      }\n    });\n\n    if (WorkerTransformStream.forceInvalidFrame) {\n      WorkerTransformStream.forceInvalidFrame = false;\n      chunk.data = invalidFrame();\n    } else {\n      if (chunk.type === 'key') {\n        chunk.data = surrogateVideoIFramePerCodec(WorkerTransformStream.codec) || chunk.data;\n      } else {\n        chunk.data = surrogateVideoPFramePerCodec(WorkerTransformStream.codec) || chunk.data;\n      }\n    }\n\n    controller.enqueue(chunk);\n  }\n\n  static audioTransformFunction(chunk, controller): void {\n    postMessage({\n      chunk: {\n        timestamp: chunk.timestamp,\n        data: chunk.data\n      }\n    });\n\n    if (WorkerTransformStream.forceInvalidFrame) {\n      WorkerTransformStream.forceInvalidFrame = false;\n      chunk.data = invalidFrame();\n    } else {\n      chunk.data = surrogateAudioSilentPerCodec(WorkerTransformStream.codec) || chunk.data;\n    }\n\n    controller.enqueue(chunk);\n  }\n\n  private constructor() {\n    throw new Error('WorkerTransformStream is a static class that may not be instantiated');\n  }\n}\n\nexport {};"],"sourceRoot":""}